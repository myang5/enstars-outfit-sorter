(this["webpackJsonpenstars-outfit-sorter"]=this["webpackJsonpenstars-outfit-sorter"]||[]).push([[0],{14:function(e,t,a){e.exports=a(21)},19:function(e,t,a){},21:function(e,t,a){"use strict";a.r(t);var s=a(0),n=a.n(s),r=a(10),i=a.n(r),l=(a(19),a(11)),o=a(3),c=a(4),u=a(1),h=a(7),f=a(6);function p(e){var t=e.toggleValue();return n.a.createElement("div",{className:"sidebar"},n.a.createElement(g,{id:"attrOpts",optionsArr:e.attributes,toggleValue:t("selAttr")}),n.a.createElement("div",{className:"options"},n.a.createElement("h3",null,"Filter data by...")),n.a.createElement(d,{toggleTrue:e.toggleTrue,toggleFalse:e.toggleFalse}),n.a.createElement(m,{id:"unitOpts",heading:"Unit",optionsArr:e.units,selected:e.selUnits,toggleValue:t("selUnits")}),n.a.createElement(m,{id:"charaOpts",heading:"Character",optionsArr:e.characters,selected:e.selCharas,toggleValue:t("selCharas")}),n.a.createElement(m,{id:"outfitOpts",heading:"Outfit Type",optionsArr:e.outfitTypes,selected:e.selOutfits,toggleValue:t("selOutfits")}))}function d(e){return n.a.createElement("div",{className:"options"},n.a.createElement("div",{className:"radioBtn"},n.a.createElement("input",{type:"radio",name:"searchType",id:"false",onClick:e.toggleFalse,defaultChecked:!0}),n.a.createElement("label",{htmlFor:"false"},"Strict match ",n.a.createElement("br",null),n.a.createElement("span",{className:"desc"},"(find outfits that match all search criteria)"))),n.a.createElement("div",{className:"radioBtn"},n.a.createElement("input",{type:"radio",name:"searchType",id:"true",onClick:e.toggleTrue}),n.a.createElement("label",{htmlFor:"true"},"Inclusive match ",n.a.createElement("br",null),n.a.createElement("span",{className:"desc"},"(find outfits that match 1 or more criteria)"))))}function g(e){var t=e.optionsArr.map((function(t){if(t)return n.a.createElement("div",{key:t},n.a.createElement("input",{type:"checkbox",value:t,onClick:e.toggleValue}),n.a.createElement("label",{htmlFor:t},t))}));return n.a.createElement("div",{className:"options",id:e.id},n.a.createElement("h3",null,"Stat Bonus"),t)}function m(e){e.optionsArr.indexOf(e.heading)>-1&&e.optionsArr.splice(e.optionsArr.indexOf(e.heading),1,"");var t=e.optionsArr.map((function(e){if(e)return n.a.createElement("option",{key:e,value:e},e)})),a=Array.from(e.selected).map((function(t){return n.a.createElement(v,{key:t,value:t,toggleValue:e.toggleValue})}));return n.a.createElement("div",{className:"options",id:e.id},n.a.createElement("h4",null,e.heading),n.a.createElement("select",{className:"options",defaultValue:"none",onChange:e.toggleValue},n.a.createElement("option",{disabled:!0,value:"none"},"(select an option)"),t),n.a.createElement("div",null,a))}function v(e){return n.a.createElement("div",{className:"toggleOpt"},n.a.createElement("span",null,e.value),n.a.createElement("button",{className:"cancelBtn",value:e.value,onClick:e.toggleValue},"X"))}var y=a(8),E=a(13);var b="AIzaSyBYN0YVkl2lB5ps2CL_74JKIs5TOukXdm4",O="1JeHlN1zcBwyBbBkyfsDiiqDZpLotkn770ewa1JCsekU",S=a(12),k=a.n(S),T=function(e){Object(h.a)(a,e);var t=Object(f.a)(a);function a(e){var s;return Object(o.a)(this,a),(s=t.call(this,e)).state={error:!1,isLoading:!1,hasMore:!0,status:"",outfits:[],loadedOutfits:[],outfitsToLoad:20},s.onScroll=s.onScroll.bind(Object(u.a)(s)),s.loadOutfits=s.loadOutfits.bind(Object(u.a)(s)),s.onScrollThrottled=k()(s.onScroll,200),s}return Object(c.a)(a,[{key:"componentDidUpdate",value:function(e){var t=this;this.props.query!==e.query&&this.setState({status:"Loading..."},(function(){fetch("https://sheets.googleapis.com/v4/spreadsheets/".concat(O,"/values/").concat("Stat Bonuses","?key=").concat(b)).then((function(e){return e.json()})).then((function(e){var a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.query||[],s=t.integers||!0,n=t.isInclusive||!1,r=[];if(e){var i=e.values[0];n&&a.length&&(a=new Set(a.reduce((function(e,t){return e.concat(Object(E.a)(t))}),[])));for(var l=function(t){var l=e.values[t],o=!1;if(0===a.size||0===a.length)o=!0;else if(n){for(var c=0;c<l.length;c++)if(a.has(l[c])){o=!0;break}}else{o=a.map((function(e){for(var t=0;t<l.length;t++)if(e.has(l[t]))return!0})).reduce((function(e,t){return e&&t}),!0)}if(o){for(var u={},h=0;h<l.length;h++){var f=i[h],p=l[h];!0!==s||isNaN(p)||(p=Number(p)),u[f.toLowerCase()]=p}r.push(u)}},o=1;o<e.values.length;o++)l(o);return r}}(e,{query:t.props.stringQuery,isInclusive:t.props.isInclusive});if(t.props.selAttr.size>0)for(var s=a.length-1;s>=0;s--){var n,r=!1,i=Object(y.a)(t.props.selAttr);try{for(i.s();!(n=i.n()).done;){var l=n.value;if(a[s][l.toLowerCase()]){r=!0;break}}}catch(o){i.e(o)}finally{i.f()}r||a.splice(s,1)}return a.sort((function(e,a){var s,n=0,r=0,i=Object(y.a)(t.props.selAttr);try{for(i.s();!(s=i.n()).done;){var l=s.value;n+=e[l.toLowerCase()],r+=a[l.toLowerCase()]}}catch(o){i.e(o)}finally{i.f()}return r-n})),{outfits:a,loadedOutfits:a.slice(0,t.state.outfitsToLoad),status:"".concat(a.length," outfits found")}})).then((function(e){return t.setState(e)}))}))}},{key:"onScroll",value:function(e){e.persist(),!this.state.isLoading&&this.state.hasMore&&e.target&&window.innerHeight+e.target.scrollTop>=e.target.scrollHeight-400&&this.loadOutfits()}},{key:"loadOutfits",value:function(){var e=this;this.setState({isLoading:!0},(function(){e.setState((function(e,t){var a=e.loadedOutfits;return{hasMore:(a=a.concat(e.outfits.slice(e.loadedOutfits.length,e.loadedOutfits.length+e.outfitsToLoad))).length<e.outfits.length,isLoading:!1,loadedOutfits:a}}))}))}},{key:"render",value:function(){var e=this,t=this.state.loadedOutfits.map((function(t){return n.a.createElement(A,{key:t.character+t.outfit,props:t,attributes:e.props.attributes,selAttr:e.props.selAttr})}));return n.a.createElement("div",{className:"outfitList",onScroll:this.onScrollThrottled},n.a.createElement("p",{className:"status"},this.state.status),t,!this.state.hasMore&&n.a.createElement("p",{className:"status"},"End of results"))}}]),a}(n.a.Component);function A(e){var t=e.props;return n.a.createElement("div",{className:"outfit"},n.a.createElement("span",null,"".concat(t.character," - ").concat(t.outfit)),n.a.createElement("hr",null),n.a.createElement(C,{attributes:e.attributes,props:e.props}),function(){if(e.selAttr.size>0){var a=Array.from(e.selAttr).reduce((function(e,a){return e+t[a.toLowerCase()]}),0);return n.a.createElement("span",null,"TOTAL BONUS: ".concat(a))}return null}())}function C(e){return n.a.createElement("div",{className:"attrList"},Object.keys(e.props).map((function(t){if(e.attributes.includes(t.charAt(0).toUpperCase()+t.slice(1)))return n.a.createElement("span",{key:t+e.props[t]},"".concat(t.charAt(0).toUpperCase()+t.slice(1),": ").concat(e.props[t]))})))}var N=function(e){Object(h.a)(a,e);var t=Object(f.a)(a);function a(e){var s;return Object(o.a)(this,a),(s=t.call(this,e)).state={characters:[],outfitTypes:[],units:[],attributes:["Ac","Pa","Un","Sm","Te","Ch"],selCharas:new Set,selOutfits:new Set,selUnits:new Set,selAttr:new Set,isInclusive:!1},s.toggleValueInSet=s.toggleValueInSet.bind(Object(u.a)(s)),s.toggleSearchTypeTrue=s.toggleSearchTypeTrue.bind(Object(u.a)(s)),s.toggleSearchTypeFalse=s.toggleSearchTypeFalse.bind(Object(u.a)(s)),s}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this;fetch("https://sheets.googleapis.com/v4/spreadsheets/".concat(O,"/values/").concat("Validation Lists","?key=").concat(b,"&majorDimension=COLUMNS")).then((function(e){return e.json()})).then((function(t){var a=t.values,s=a.filter((function(e){return"Character"===e[0]})),n=a.filter((function(e){return"Outfit Type"===e[0]})),r=a.filter((function(e){return"Unit"===e[0]}));e.setState({characters:s[0],outfitTypes:n[0],units:r[0]})}))}},{key:"toggleValueInSet",value:function(){var e=this;return function(t){return function(a){var s=e.state[t];e.state[t].has(a.target.value)?s.delete(a.target.value):s.add(a.target.value),e.setState(Object(l.a)({},t,s))}}}},{key:"toggleSearchTypeTrue",value:function(){this.setState({isInclusive:!0})}},{key:"toggleSearchTypeFalse",value:function(){this.setState({isInclusive:!1})}},{key:"render",value:function(){var e=this,t={characters:this.state.characters,outfitTypes:this.state.outfitTypes,units:this.state.units,attributes:this.state.attributes,selCharas:this.state.selCharas,selOutfits:this.state.selOutfits,selUnits:this.state.selUnits,toggleValue:this.toggleValueInSet,toggleTrue:this.toggleSearchTypeTrue,toggleFalse:this.toggleSearchTypeFalse},a=Object.keys(this.state).reduce((function(t,a){var s=e.state[a];return Array.isArray(s)?t.concat([]):t.concat(Array.from(s))}),[]);a.push(this.state.isInclusive);var s={query:a,stringQuery:Object.keys(this.state).reduce((function(t,a){var s=e.state[a];return!Array.isArray(s)&&"object"===typeof s&&"selAttr"!==a&&s.size>0?(t.push(s),t):t}),[]),attributes:this.state.attributes,selCharas:this.state.selCharas,selOutfits:this.state.selOutfits,selUnits:this.state.selUnits,selAttr:this.state.selAttr,isInclusive:this.state.isInclusive};return n.a.createElement(n.a.Fragment,null,n.a.createElement(T,s),n.a.createElement(p,t))}}]),a}(n.a.Component);var j=function(){return n.a.createElement("div",{className:"App"},n.a.createElement(N,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(j,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[14,1,2]]]);
//# sourceMappingURL=main.988a067b.chunk.js.map