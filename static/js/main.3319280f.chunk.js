(this["webpackJsonpenstars-outfit-sorter"]=this["webpackJsonpenstars-outfit-sorter"]||[]).push([[0],{14:function(e,t,a){e.exports=a(21)},19:function(e,t,a){},21:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),s=a(11),l=a.n(s),i=(a(19),a(8)),o=a(3),c=a(4),u=a(1),f=a(7),h=a(6);function d(e){var t=e.toggleValue();return n.a.createElement("div",{id:"sidebar",className:"toggledOn"},n.a.createElement(p,{id:"attrOpts",optionsArr:e.attributes,toggleValue:t("selAttr")}),n.a.createElement("div",{className:"options"},n.a.createElement("p",null,"Filter data by...")),n.a.createElement(m,{toggleTrue:e.toggleTrue,toggleFalse:e.toggleFalse}),n.a.createElement(v,{id:"unitOpts",heading:"Unit",optionsArr:e.units,selected:e.selUnits,toggleValue:t("selUnits"),clearFilter:e.clearFilter("selUnits")}),n.a.createElement(v,{id:"charaOpts",heading:"Character",optionsArr:e.characters,selected:e.selCharas,toggleValue:t("selCharas"),clearFilter:e.clearFilter("selCharas")}),n.a.createElement(g,{id:"tierOpts",optionsArr:e.outfitTiers,toggleValue:t("selTiers")}),n.a.createElement(v,{id:"outfitOpts",heading:"Outfit Type",optionsArr:e.outfitTypes,selected:e.selOutfits,toggleValue:t("selOutfits"),clearFilter:e.clearFilter("selOutfits")}))}function m(e){return n.a.createElement("div",{className:"options"},n.a.createElement("div",{className:"radioBtn"},n.a.createElement("input",{type:"radio",name:"searchType",id:"false",onClick:e.toggleFalse,defaultChecked:!0}),n.a.createElement("label",{htmlFor:"false"},"Strict match ",n.a.createElement("br",null),n.a.createElement("span",{className:"desc"},"(find outfits that match all search criteria)"))),n.a.createElement("div",{className:"radioBtn"},n.a.createElement("input",{type:"radio",name:"searchType",id:"true",onClick:e.toggleTrue}),n.a.createElement("label",{htmlFor:"true"},"Inclusive match ",n.a.createElement("br",null),n.a.createElement("span",{className:"desc"},"(find outfits that match 1 or more criteria)"))))}function p(e){var t=e.optionsArr.map((function(t){return n.a.createElement("div",{key:t},n.a.createElement("input",{type:"checkbox",value:t,onClick:e.toggleValue}),n.a.createElement("label",{htmlFor:t},t))}));return n.a.createElement("div",{className:"options",id:e.id},n.a.createElement("div",{className:"row"},n.a.createElement("p",null,"Stat Bonus")),n.a.createElement("div",{className:"row"},t))}function g(e){var t=e.optionsArr.map((function(t,a){return n.a.createElement("div",{key:t},n.a.createElement("input",{type:"checkbox",value:a+1,onClick:e.toggleValue}),n.a.createElement("label",{htmlFor:t},t))}));return n.a.createElement("div",{className:"options",id:e.id},n.a.createElement("div",{className:"row"},n.a.createElement("p",null,"Outfit Tier")),n.a.createElement("div",{className:"row"},t))}function v(e){e.optionsArr.indexOf(e.heading)>-1&&e.optionsArr.splice(e.optionsArr.indexOf(e.heading),1,"");var t=e.optionsArr.map((function(e){if(e)return n.a.createElement("option",{key:e,value:e},e)})),a=Array.from(e.selected).map((function(t){return n.a.createElement(y,{key:t,value:t,toggleValue:e.toggleValue})}));return n.a.createElement("div",{className:"options",id:e.id},n.a.createElement("div",{className:"row"},n.a.createElement("div",null,n.a.createElement("p",null,e.heading)),n.a.createElement(E,{clearFilter:e.clearFilter})),n.a.createElement("select",{className:"row",defaultValue:"none",onChange:e.toggleValue},n.a.createElement("option",{disabled:!0,value:"none"},"(select an option)"),t),n.a.createElement("div",null,a))}function E(e){return n.a.createElement("div",{className:"clearFilter"},n.a.createElement("button",{className:"clearBtn",onClick:e.clearFilter},"X"),n.a.createElement("span",null,"Clear"))}function y(e){return n.a.createElement("div",{className:"toggleOpt"},n.a.createElement("span",null,e.value),n.a.createElement("button",{className:"cancelBtn",value:e.value,onClick:e.toggleValue},"X"))}var b=a(9),O=a(13);var S="AIzaSyBYN0YVkl2lB5ps2CL_74JKIs5TOukXdm4",T="1JeHlN1zcBwyBbBkyfsDiiqDZpLotkn770ewa1JCsekU",k=a(12),A=a.n(k),N=function(e){Object(f.a)(a,e);var t=Object(h.a)(a);function a(e){var r;return Object(o.a)(this,a),(r=t.call(this,e)).state={error:!1,isLoading:!1,hasMore:!0,status:"",outfits:[],loadedOutfits:[],outfitsToLoad:20},r.onScroll=r.onScroll.bind(Object(u.a)(r)),r.loadOutfits=r.loadOutfits.bind(Object(u.a)(r)),r.onScrollThrottled=A()(r.onScroll,100),r.toggleSidebar=function(){document.querySelector("#sidebar").classList.toggle("toggledOn")},r}return Object(c.a)(a,[{key:"componentDidUpdate",value:function(e){var t=this;this.props.query!==e.query&&this.setState({status:"Loading..."},(function(){fetch("https://sheets.googleapis.com/v4/spreadsheets/".concat(T,"/values/").concat("Stat Bonuses","?key=").concat(S)).then((function(e){return e.json()})).then((function(e){var a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.query||[],r=t.integers||!0,n=t.isInclusive||!1,s=[];if(e){var l=e.values[0];n&&a.length&&(a=new Set(a.reduce((function(e,t){return e.concat(Object(O.a)(t))}),[])));for(var i=function(t){var i=e.values[t],o=!1;if(0===a.size||0===a.length)o=!0;else if(n){for(var c=0;c<i.length;c++)if(a.has(i[c])){o=!0;break}}else{o=a.map((function(e){for(var t=0;t<i.length;t++)if(e.has(i[t]))return!0})).reduce((function(e,t){return e&&t}),!0)}if(o){for(var u={},f=0;f<i.length;f++){var h=l[f],d=i[f];!0!==r||isNaN(d)||(d=Number(d)),u[h.toLowerCase()]=d}s.push(u)}},o=1;o<e.values.length;o++)i(o);return s}}(e,{query:t.props.stringQuery,isInclusive:t.props.isInclusive});if(t.props.selAttr.size>0)for(var r=a.length-1;r>=0;r--){var n,s=!1,l=Object(b.a)(t.props.selAttr);try{for(l.s();!(n=l.n()).done;){var i=n.value;if(a[r][i.toLowerCase()]){s=!0;break}}}catch(o){l.e(o)}finally{l.f()}s||a.splice(r,1)}return a.sort((function(e,a){var r,n=0,s=0,l=Object(b.a)(t.props.selAttr);try{for(l.s();!(r=l.n()).done;){var i=r.value;n+=e[i.toLowerCase()],s+=a[i.toLowerCase()]}}catch(o){l.e(o)}finally{l.f()}return s-n})),{outfits:a,loadedOutfits:[],status:"".concat(a.length," outfits found")}})).then((function(e){t.setState(e,t.loadOutfits)}))}))}},{key:"onScroll",value:function(e){e.persist(),!this.state.isLoading&&this.state.hasMore&&e.target&&window.innerHeight+e.target.scrollTop>=e.target.scrollHeight-600&&this.loadOutfits()}},{key:"loadOutfits",value:function(){var e=this;this.setState({isLoading:!0},(function(){e.setState((function(e,t){var a=e.loadedOutfits;return{hasMore:(a=a.concat(e.outfits.slice(e.loadedOutfits.length,e.loadedOutfits.length+e.outfitsToLoad))).length<e.outfits.length,isLoading:!1,loadedOutfits:a}}))}))}},{key:"render",value:function(){var e=this,t=this.state.loadedOutfits.map((function(t){return n.a.createElement(C,{key:t.character+t.outfit,props:t,attributes:e.props.attributes,selAttr:e.props.selAttr})}));return n.a.createElement("div",{className:"pageContent",onScroll:this.onScrollThrottled},n.a.createElement("div",{id:"toggleSidebarBtn",onClick:this.toggleSidebar}),n.a.createElement("p",{className:"status"},this.state.status),n.a.createElement("div",{id:"outfitList"},t),!this.state.hasMore&&n.a.createElement("p",{className:"status"},"End of results"))}}]),a}(n.a.Component);function C(e){var t=e.props;return n.a.createElement("div",{className:"outfit"},n.a.createElement("span",null,"".concat(t.character," - ").concat(t.outfit)),n.a.createElement("hr",null),n.a.createElement(w,{attributes:e.attributes,props:e.props}),function(){if(e.selAttr.size>0){var a=Array.from(e.selAttr).reduce((function(e,a){return e+t[a.toLowerCase()]}),0);return n.a.createElement("span",null,"TOTAL BONUS: ".concat(a))}return null}())}function w(e){return n.a.createElement("div",{className:"attrList"},Object.keys(e.props).map((function(t){if(e.attributes.includes(t.charAt(0).toUpperCase()+t.slice(1)))return n.a.createElement("span",{key:t+e.props[t]},"".concat(t.charAt(0).toUpperCase()+t.slice(1),": ").concat(e.props[t]))})))}var F=function(e){Object(f.a)(a,e);var t=Object(h.a)(a);function a(e){var r;return Object(o.a)(this,a),(r=t.call(this,e)).state={characters:[],units:[],outfitTypes:[],outfitTiers:["Tier I","Tier II","Tier III"],attributes:["Ac","Pa","Un","Sm","Te","Ch"],selCharas:new Set,selOutfits:new Set,selUnits:new Set,selTiers:new Set,selAttr:new Set,isInclusive:!1},r.toggleValueInSet=r.toggleValueInSet.bind(Object(u.a)(r)),r.toggleSearchTypeTrue=r.toggleSearchTypeTrue.bind(Object(u.a)(r)),r.toggleSearchTypeFalse=r.toggleSearchTypeFalse.bind(Object(u.a)(r)),r.clearFilter=r.clearFilter.bind(Object(u.a)(r)),r}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this;fetch("https://sheets.googleapis.com/v4/spreadsheets/".concat(T,"/values/").concat("Validation Lists","?key=").concat(S,"&majorDimension=COLUMNS")).then((function(e){return e.json()})).then((function(t){var a=t.values,r=a.filter((function(e){return"Character"===e[0]})),n=a.filter((function(e){return"Outfit Type"===e[0]})),s=a.filter((function(e){return"Unit"===e[0]}));e.setState({characters:r[0],outfitTypes:n[0],units:s[0]})}))}},{key:"toggleSearchTypeTrue",value:function(){this.setState({isInclusive:!0})}},{key:"toggleSearchTypeFalse",value:function(){this.setState({isInclusive:!1})}},{key:"toggleValueInSet",value:function(){var e=this;return function(t){return function(a){var r=e.state[t];e.state[t].has(a.target.value)?r.delete(a.target.value):r.add(a.target.value),e.setState(Object(i.a)({},t,r))}}}},{key:"clearFilter",value:function(e){var t=this;return function(){return t.setState(Object(i.a)({},e,new Set))}}},{key:"render",value:function(){var e=this,t={characters:this.state.characters,outfitTypes:this.state.outfitTypes,units:this.state.units,outfitTiers:this.state.outfitTiers,attributes:this.state.attributes,selCharas:this.state.selCharas,selOutfits:this.state.selOutfits,selUnits:this.state.selUnits,toggleValue:this.toggleValueInSet,toggleTrue:this.toggleSearchTypeTrue,toggleFalse:this.toggleSearchTypeFalse,clearFilter:this.clearFilter},a=Object.keys(this.state).reduce((function(t,a){var r=e.state[a];return Array.isArray(r)?t.concat([]):t.concat(Array.from(r))}),[]);a.push(this.state.isInclusive);var r={query:a,stringQuery:Object.keys(this.state).reduce((function(t,a){var r=e.state[a];return!Array.isArray(r)&&"object"===typeof r&&"selAttr"!==a&&r.size>0?(t.push(r),t):t}),[]),attributes:this.state.attributes,selAttr:this.state.selAttr,isInclusive:this.state.isInclusive};return n.a.createElement(n.a.Fragment,null,n.a.createElement(d,t),n.a.createElement(N,r))}}]),a}(n.a.Component);var j=function(){return n.a.createElement("div",{className:"App"},n.a.createElement(F,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(j,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[14,1,2]]]);
//# sourceMappingURL=main.3319280f.chunk.js.map