(this["webpackJsonpenstars-outfit-sorter"]=this["webpackJsonpenstars-outfit-sorter"]||[]).push([[0],{26:function(e,t,a){e.exports=a.p+"static/media/instructions0.d5dad995.png"},27:function(e,t,a){e.exports=a.p+"static/media/instructions1.e918fb19.png"},28:function(e,t,a){e.exports=a.p+"static/media/instructions2.35bd47ff.PNG"},29:function(e,t,a){e.exports=a.p+"static/media/instructions3.819b73f6.PNG"},30:function(e,t,a){e.exports=a.p+"static/media/arrow_left_darkblue.76314777.svg"},31:function(e,t,a){e.exports=a.p+"static/media/arrow_up_darkblue.727d3630.svg"},32:function(e,t,a){e.exports=a.p+"static/media/arrow_down_darkblue.87e78f37.svg"},33:function(e,t,a){e.exports=a.p+"static/media/filter_darkblue.224365ea.svg"},34:function(e,t,a){e.exports=a.p+"static/media/platform.deae2014.svg"},39:function(e,t,a){e.exports=a(49)},44:function(e,t,a){},49:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=a(25),i=a.n(r),l=(a(44),a(17)),o=a(21),c=a(12),u=a(3),m=a(4),h=a(1),d=a(6),p=a(5),f=a(16),g=a(26),b=a.n(g),v=a(27),E=a.n(v),O=a(28),y=a.n(O),k=a(29),M=a.n(k),S=a(30),C=a.n(S),j=a(31),A=a.n(j),T=a(32),J=a.n(T),w=a(33),N=a.n(w),I=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={filters:null,isFilterMenu:!1},n.toggleFilterMenu=n.toggleFilterMenu.bind(Object(h.a)(n)),n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=this.getSetsFromOutfitArray(this.props.data);this.setState({filters:e})}},{key:"getSetsFromOutfitArray",value:function(e){for(var t=this.props.filters,a=new Array(t.length),n=0;n<a.length;n++)a[n]=new Set;for(var s=0;s<t.length;s++)a[s].add(t[s]);for(var r=0;r<e.length;r++)for(var i=e[r],l=0;l<t.length;l++)a[l].add(i[t[l]]);return a}},{key:"toggleFilterMenu",value:function(){this.setState((function(e){return{isFilterMenu:!e.isFilterMenu}}))}},{key:"render",value:function(){var e=this;if(this.state.filters){var t={selAttr:this.props.selAttr,sortOutfits:this.props.sortOutfits},a=s.a.createElement(L,Object.assign({className:"hideOnPortraitSmall"},t)),n=s.a.createElement(L,Object.assign({className:"hideOnLandscape"},t));return s.a.createElement("div",{id:"sidebar",className:"toggledOn"},s.a.createElement("div",{className:"btn close",onClick:function(){e.setState({isFilterMenu:!1}),e.props.toggleOutfitList()}},s.a.createElement("img",{src:C.a,alt:"\u2190"})),s.a.createElement("span",{id:"status"},this.props.status),s.a.createElement("div",{className:"right"},a,s.a.createElement("div",{className:"btn toggleFilter",onClick:this.toggleFilterMenu},s.a.createElement("img",{src:N.a,alt:"filter options"}))),s.a.createElement(B,{isFilterMenu:this.state.isFilterMenu,filters:this.state.filters,sortMenu:n,toggleMade:this.props.toggleMade,selMade:this.props.selMade,submitFilterSelection:this.props.submitFilterSelection,toggleFilterMenu:this.toggleFilterMenu}))}return null}}]),a}(s.a.Component);function F(e){var t=Object(c.a)({},e);return t.src=e.up?A.a:J.a,t.alt=e.up?"\u2191":"\u2193",s.a.createElement("img",t)}var L=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={activeSort:"Total Bonus",isAscending:!1},n.toggleSort=n.toggleSort.bind(Object(h.a)(n)),n}return Object(m.a)(a,[{key:"toggleSort",value:function(e){var t=this;this.setState((function(t){return t.activeSort===e?{isAscending:!t.isAscending}:{activeSort:e,isAscending:!1}}),(function(){t.props.sortOutfits(e,t.state.isAscending)}))}},{key:"render",value:function(){var e=this,t=this.props.selAttr.map((function(t){return s.a.createElement(D,{key:t,opt:t,isActive:t===e.state.activeSort,isAscending:e.state.isAscending,onClick:function(){return e.toggleSort(t)}})}));return t.unshift(s.a.createElement(D,{key:"Total Bonus",opt:"Total",isActive:"Total Bonus"===this.state.activeSort,isAscending:this.state.isAscending,onClick:function(){return e.toggleSort("Total Bonus")}})),s.a.createElement("div",{id:"sortMenu",className:this.props.className?this.props.className:null},t)}}]),a}(s.a.Component);function D(e){return s.a.createElement("div",{className:"btn sortOpt"+(e.isActive?" active":""),onClick:e.onClick},s.a.createElement("span",{className:"arrow",style:{width:"0.7rem",height:"1rem"}},e.isActive&&s.a.createElement(F,{up:e.isAscending})),"Total"!==e.opt?s.a.createElement(de,{attr:e.opt}):s.a.createElement("span",null,e.opt))}function U(e){return s.a.createElement("div",{className:"radioBtn",id:"toggleMade"},s.a.createElement("input",{type:"checkbox",checked:!!e.selMade.size,onChange:e.toggleMade}),s.a.createElement("label",{htmlFor:"toggleMade"},"Only made outfits"))}var B=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={activeMenu:""},n.toggleMenu=n.toggleMenu.bind(Object(h.a)(n)),n}return Object(m.a)(a,[{key:"toggleMenu",value:function(e){this.setState((function(t){return{activeMenu:t.activeMenu===e?"":e}}))}},{key:"render",value:function(){var e=this,t=this.props.filters.map((function(t){var a=Array.from(t)[0],n="sel"+a;return s.a.createElement(R,{key:a,heading:a,isMenuActive:e.state.activeMenu===a,toggleMenu:function(){return e.toggleMenu(a)},optionsArr:Array.from(t),submitSelection:e.props.submitFilterSelection(n)})}));return s.a.createElement("div",{id:"filterMenu",className:"overlayContent",style:{display:this.props.isFilterMenu?"flex":"none"}},s.a.createElement("div",{className:"topContainer"},s.a.createElement("h4",{className:"hideOnLandscape"},"Sort by..."),this.props.sortMenu,s.a.createElement("h4",null,"Filter by..."),this.props.toggleMade&&s.a.createElement(U,{selMade:this.props.selMade,toggleMade:this.props.toggleMade}),s.a.createElement("div",{id:"filters"},t)),s.a.createElement("div",{className:"bottomContainer"},s.a.createElement("div",{className:"btn",onClick:this.props.toggleFilterMenu},"Close")))}}]),a}(s.a.PureComponent),R=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={selected:new Set,submitted:new Set},n.toggleOption=n.toggleOption.bind(Object(h.a)(n)),n.clearSelect=n.clearSelect.bind(Object(h.a)(n)),n.selectAll=n.selectAll.bind(Object(h.a)(n)),n.clearFilter=n.clearFilter.bind(Object(h.a)(n)),n.submitSelection=n.submitSelection.bind(Object(h.a)(n)),n}return Object(m.a)(a,[{key:"toggleOption",value:function(e){var t=this.state.selected;this.state.selected.has(e)?t.delete(e):t.add(e),this.setState({selected:t})}},{key:"clearSelect",value:function(){this.setState({selected:new Set,submitted:new Set})}},{key:"selectAll",value:function(){var e=this.props.optionsArr.slice(),t=e.indexOf(this.props.heading);e.splice(t,1),this.setState({selected:new Set(e)})}},{key:"clearFilter",value:function(){this.clearSelect(),this.props.submitSelection(new Set)}},{key:"submitSelection",value:function(){var e=new Set(this.state.selected);this.setState({submitted:e}),this.props.submitSelection(this.state.selected)}},{key:"render",value:function(){return s.a.createElement("div",{className:"filter"},s.a.createElement("div",{className:"filterHeading"},s.a.createElement(F,{className:"filterIcon",onClick:this.props.toggleMenu,up:this.props.isMenuActive}),s.a.createElement("p",{onClick:this.props.toggleMenu},this.props.heading),this.state.submitted.size>0&&s.a.createElement("a",{onClick:this.clearFilter},"clear filter")),this.props.isMenuActive&&s.a.createElement(x,{heading:this.props.heading,optionsArr:this.props.optionsArr,selected:this.state.selected,submitted:this.state.submitted,submitSelection:this.submitSelection,toggleMenu:this.props.toggleMenu,toggleOption:this.toggleOption,clearSelect:this.clearSelect,selectAll:this.selectAll}))}}]),a}(s.a.Component),x=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"filterOptions"},s.a.createElement("div",null,s.a.createElement("span",{className:"btn submit",onClick:function(){e.props.toggleMenu(),e.props.submitSelection()}},"OK")),s.a.createElement(P,{heading:this.props.heading,optionsArr:this.props.optionsArr,selected:this.props.selected,submitted:this.props.submitted,toggleOption:this.props.toggleOption}),s.a.createElement("div",null))}}]),a}(s.a.Component);function P(e){var t=e.optionsArr.slice(0).sort();t.indexOf(e.heading)>-1&&t.splice(t.indexOf(e.heading),1),e.submitted.size>0&&t.sort((function(t,a){return e.submitted.has(t)===e.submitted.has(a)?0:e.submitted.has(t)?-1:e.submitted.has(a)?1:void 0}));var a=t.map((function(t){return s.a.createElement("li",{key:t,className:e.selected.has(t)?"selected":"",onClick:function(){return e.toggleOption(t)}},s.a.createElement("div",null,s.a.createElement("span",null),t))}));return s.a.createElement("ul",null,a)}function H(e){var t,a,r=Object(n.useState)(null),i=Object(l.a)(r,2),o=i[0],c=i[1],u=(t=o,a=c,function(e){a(t===e?null:e)});return s.a.createElement("div",{className:"overlay"},s.a.createElement("div",{className:"overlayContent",id:"instructions"},s.a.createElement("div",{className:"topContainer"},s.a.createElement("div",{className:"top"},s.a.createElement("h3",null,"Don't see your outfit?"),s.a.createElement("p",null,"Add it to the ",s.a.createElement("a",{target:"_blank",href:"https://docs.google.com/spreadsheets/d/1JeHlN1zcBwyBbBkyfsDiiqDZpLotkn770ewa1JCsekU/edit#gid=0"},"outfit database spreadsheet!")),s.a.createElement("p",null,"If you don't see a specific outfit, it's because the database currently doesn't have information for it. Please add its stats to the database and refresh the outfit sorter."),s.a.createElement("hr",null),s.a.createElement("h3",null,"How to import user data"),s.a.createElement("p",null,"Make a copy of this ",s.a.createElement("a",{target:"_blank",href:"https://docs.google.com/spreadsheets/d/1asGXfBIw2qe3xYX_mawgbjO34gYqsj6IBNRbzqtqNAQ/"},"Google spreadsheet template")," and fill it with your outfits."),s.a.createElement("ul",null,s.a.createElement("p",null,s.a.createElement("strong",null,"Notes on the spreadsheet format")),s.a.createElement("li",null,s.a.createElement("strong",null,"Must have:")," a sheet named Outfits with columns labeled Character, Outfit, and Made"),s.a.createElement("li",null,s.a.createElement("strong",null,"Optional: ")," the Idol Status sheet and Validation Lists sheet"),s.a.createElement("li",null,"The character and outfit names should match the spelling and translations in the database's ",s.a.createElement("a",{target:"_blank",href:"https://docs.google.com/spreadsheets/d/1JeHlN1zcBwyBbBkyfsDiiqDZpLotkn770ewa1JCsekU/edit#gid=350164119"},"Validation Lists"),".")),s.a.createElement("p",null,s.a.createElement("strong",null,"Turn link sharing on for the spreadsheet.")," Otherwise the sorter will not be able to access the contents."),s.a.createElement("ul",null,s.a.createElement("p",{className:"sharingHeading",onClick:function(){return u("desktop")}},s.a.createElement(F,{className:"arrow",up:"desktop"===o}),s.a.createElement("strong",null,"On desktop")),"desktop"===o&&s.a.createElement(s.a.Fragment,null,s.a.createElement("li",null,s.a.createElement("p",null,"Click the 'Share' button in the top right corner and click 'Get shareable link'."),s.a.createElement("img",{src:b.a,alt:"Turn on link sharing"})),s.a.createElement("li",null,s.a.createElement("p",null,"Copy the provided link."),s.a.createElement("img",{src:E.a,alt:"Copy link"})))),s.a.createElement("ul",null,s.a.createElement("p",{className:"sharingHeading",onClick:function(){return u("mobileApp")}},s.a.createElement(F,{className:"arrow",up:"mobileApp"===o}),s.a.createElement("strong",null,"On Sheets mobile app")),"mobileApp"===o&&s.a.createElement(s.a.Fragment,null,s.a.createElement("li",null,s.a.createElement("p",null,"Open the spreadsheet settings and tap 'Share & export'."),s.a.createElement("img",{src:y.a,alt:"Open mobile settings"})),s.a.createElement("li",null,s.a.createElement("p",null,"Turn 'Link sharing' on and copy the link."),s.a.createElement("img",{src:M.a,alt:"Turn link sharing on"})))),s.a.createElement("p",null,"Copy and paste the spreadsheet link into the sorter and click 'Add'."),s.a.createElement("p",null,"OR get the spreadsheet ID and add it to the sorter URL:"),s.a.createElement("ul",null,s.a.createElement("li",null,s.a.createElement("p",null,"Your spreadsheet link will look something like this:"),s.a.createElement("blockquote",null,"https://docs.google.com/spreadsheets/d/",s.a.createElement("strong",null,"SPREADSHEET_ID"),"/edit...")),s.a.createElement("li",null,s.a.createElement("p",null,"Get the SPREADSHEET_ID part of the link and add it to the sorter URL so it looks like this:"),s.a.createElement("blockquote",null,"https://myang5.github.io/enstars-outfit-sorter/#/",s.a.createElement("strong",null,"SPREADSHEET_ID")))),s.a.createElement("p",null,"This way you can save/bookmark the outfit sorter with your data instead of pasting the spreadsheet link every time."),s.a.createElement("hr",null),s.a.createElement("h3",null,"About"),s.a.createElement("p",null,"Tool developed by ",s.a.createElement("a",{href:"https://twitter.com/gayandasleep"},"Midori")," (feel free to DM them with any feedback/bug reports/suggestions for features"),s.a.createElement("p",null,"Game images pulled from ",s.a.createElement("a",{href:"https://twitter.com/sakasakitty/status/1230928809169498113"},"Rai's render drive")),s.a.createElement("p",null,"Directional arrow icons made by ",s.a.createElement("a",{href:"https://www.flaticon.com/authors/roundicons",title:"Roundicons"},"Roundicons")," from ",s.a.createElement("a",{href:"https://www.flaticon.com/",title:"Flaticon"},"www.flaticon.com")))),s.a.createElement("div",{className:"bottomContainer"},s.a.createElement("div",{className:"btn",onClick:e.toggleInstructions},"Close"))))}var V=a(34),_=a.n(V),q=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={isInstructions:!1},n.toggleInstructions=n.toggleInstructions.bind(Object(h.a)(n)),n}return Object(m.a)(a,[{key:"toggleInstructions",value:function(){this.setState((function(e){return{isInstructions:!e.isInstructions}}))}},{key:"render",value:function(){var e=this;if(this.props.activeJob&&this.props.teamMembers.length>0){var t=this.props.teamMembers.map((function(t,a){return s.a.createElement(z,{key:a+JSON.stringify(t),index:a,member:t,selAttr:e.props.selAttr,toggleOutfitList:e.props.toggleOutfitList})})),a=s.a.createElement("div",{className:"btn addData",onClick:function(){return e.props.getUserData(document.querySelector("#userData").value)}},"Add"),n=s.a.createElement("div",{className:"btn help",onClick:this.toggleInstructions},"?");this.props.sheetId;return s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{key:this.props.sheetId,id:"topMenu"},s.a.createElement("span",null,"spreadsheet: "),s.a.createElement("input",{id:"userData",type:"text",defaultValue:this.props.sheetId}),a,n),s.a.createElement("div",{id:"teamViewContainer"},s.a.createElement("div",{id:"teamView"},t)),this.state.isInstructions&&s.a.createElement(H,{toggleInstructions:this.toggleInstructions}))}return null}}]),a}(s.a.Component);function z(e){var t="teamMember"+(e.member.hasOwnProperty("Made")?e.member.Made?"":" notMade":""),a=e.member?"".concat(e.member.Character," ").concat(e.member.Outfit):null;return s.a.createElement("div",{className:t,onClick:function(){return e.toggleOutfitList(e.index)}},s.a.createElement("div",{className:"imgContainer"},s.a.createElement(G,{hasMember:e.member}),s.a.createElement(ue,{obj:e.member,alt:a})),s.a.createElement(me,{attr:e.selAttr,bonus:e.member,maxValue:300,hideIcon:!0}))}function G(e){return s.a.createElement(s.a.Fragment,null,s.a.createElement("img",{className:"platform",src:_.a}),e.hasMember?s.a.createElement("div",{className:"shadow"}):null)}var Y=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={isJobList:!1},n.toggleJobList=n.toggleJobList.bind(Object(h.a)(n)),n}return Object(m.a)(a,[{key:"toggleJobList",value:function(){this.setState((function(e,t){return{isJobList:!e.isJobList}}))}},{key:"render",value:function(){if(this.props.activeJob){var e={attr:this.props.attr,activeJob:this.props.activeJob,teamMembers:this.props.teamMembers,toggleJobList:this.toggleJobList},t={jobs:this.props.jobs,attr:this.props.attr,activeJob:this.props.activeJob,selectJob:this.props.selectJob,toggleJobList:this.toggleJobList};return s.a.createElement("div",{id:"jobView"},s.a.createElement(Q,e),s.a.createElement("div",{className:"overlay",style:{display:this.state.isJobList?"flex":"none"}},s.a.createElement(X,t)))}return null}}]),a}(s.a.PureComponent),Q=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(e){return Object(u.a)(this,a),t.call(this,e)}return Object(m.a)(a,[{key:"render",value:function(){var e=this,t=s.a.createElement("div",{className:"btn selectJob",onClick:this.props.toggleJobList},"Change Job"),a=this.props.attr.filter((function(t){return e.props.activeJob[t]>0})),n={},r={};return a.forEach((function(t){n[t]=e.props.activeJob[t],r[t]=e.props.teamMembers.reduce((function(e,a){return a?e+a[t]:e}),0)})),s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"header"},s.a.createElement("div",{className:"title"},s.a.createElement("p",null,this.props.activeJob["Job JP"]),t),s.a.createElement("hr",null),s.a.createElement("div",{className:"statInfo"},s.a.createElement(ue,{obj:this.props.activeJob,alt:this.props.activeJob.Job}),s.a.createElement(me,{maxValue:1500,attr:a,value:r,baseline:n}))),s.a.createElement("div",{className:"workResult"},s.a.createElement(W,{baseline:n,value:r})))}}]),a}(s.a.PureComponent);function W(e){var t=Object.keys(e.baseline).reduce((function(t,a){var n=e.value[a]/e.baseline[a]*(1/3);return t+Math.min(n,1/3)}),0);return s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{id:"progressBarContainer"},s.a.createElement("span",{id:"progressBarHide",style:{width:"".concat(100*(1-t),"%")}}),s.a.createElement("span",{id:"progressBar",style:{width:"100%"}})),s.a.createElement("div",{className:"status"},"Work Result: ".concat(Math.floor(100*t),"%")))}var X=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={menus:{Beginner:"\u3010\u521d\u7d1a\u3011",Intermediate:"\u3010\u4e2d\u7d1a\u3011",Advanced:"\u3010\u4e0a\u7d1a\u3011",Unit:"Unit","ES Building":"ES\u30d3\u30eb",Limited:"\u671f\u9593\u9650\u5b9a"},activeMenu:null,viewJob:null},n.toggleProperty=n.toggleProperty.bind(Object(h.a)(n)),n.toggleMenu=n.toggleMenu.bind(Object(h.a)(n)),n.getAvailableMenus=n.getAvailableMenus.bind(Object(h.a)(n)),n.getMenuJobs=n.getMenuJobs.bind(Object(h.a)(n)),n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){this.setState({activeMenu:this.props.activeJob.Type,viewJob:this.props.activeJob})}},{key:"toggleProperty",value:function(e,t){this.setState(Object(f.a)({},e,t))}},{key:"toggleMenu",value:function(e){var t=this.getMenuJobs(e)[0];this.setState({activeMenu:e,viewJob:t})}},{key:"getAvailableMenus",value:function(){var e=this,t=Object.keys(this.state.menus),a={},n=new Set(this.props.jobs.map((function(e){return e.Type?e.Type.trim():""})));return t.forEach((function(t){t.length>0&&n.has(t)&&(a[t]=e.state.menus[t])})),a}},{key:"getMenuJobs",value:function(e){return this.props.jobs.filter((function(t){return!!t.Type&&t.Type.trim()===e}))}},{key:"render",value:function(){var e=this,t=s.a.createElement("div",{className:"btn selectJob",onClick:function(){e.props.selectJob(e.state.viewJob),e.props.toggleJobList()}},"Select Job");return this.state.viewJob&&s.a.createElement("div",{className:"overlayContent",id:"jobList"},s.a.createElement("div",{className:"bottom left"},s.a.createElement(Z,{menus:this.getAvailableMenus(),activeMenu:this.state.activeMenu,toggleMenu:this.toggleMenu}),s.a.createElement(K,{jobs:this.getMenuJobs(this.state.activeMenu),viewJob:this.state.viewJob,toggleProperty:this.toggleProperty})),s.a.createElement("div",{className:"top right"},s.a.createElement($,{job:this.state.viewJob,attr:this.props.attr,button:t,toggleJobList:this.props.toggleJobList})))}}]),a}(s.a.Component);function Z(e){var t=Object.keys(e.menus).map((function(t){return s.a.createElement("div",{key:t,className:"jobTab"+(e.activeMenu===t?" selected":""),onClick:function(){return e.toggleMenu(t)}},e.menus[t])}));return s.a.createElement("div",{id:"jobTabMenu"},t)}function K(e){var t=e.jobs.map((function(t){var a=e.viewJob.Job===t.Job,n=t["Job JP"]+(a?" selected":"");return s.a.createElement("div",{key:n,className:"jobOpt"+(a?" selected":""),onClick:function(){return e.toggleProperty("viewJob",t)}},t["Job JP"])}));return s.a.createElement("div",{id:"jobSelect"},t)}function $(e){var t=e.attr.filter((function(t){return e.job[t]>0})),a={};t.forEach((function(t){return a[t]=e.job[t]}));var n=s.a.createElement("div",{className:"btn closeJob",onClick:e.toggleJobList},"Cancel");return s.a.createElement("div",{id:"jobDetail"},s.a.createElement("p",null,e.job["Job JP"]),s.a.createElement(ue,{obj:e.job,alt:e.job.Job}),s.a.createElement(me,{maxValue:1500,attr:t,value:a}),s.a.createElement("div",{className:"jobDetailBtns"},e.button,n))}var ee=a(35),te=a.n(ee),ae=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={error:!1,isLoading:!1,hasMore:!0,loadedOutfits:[],outfitsToLoad:30},n.onScroll=n.onScroll.bind(Object(h.a)(n)),n.loadOutfits=n.loadOutfits.bind(Object(h.a)(n)),n.onScrollThrottled=te()(n.onScroll,100),n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){this.loadOutfits()}},{key:"onScroll",value:function(e){e.persist(),!this.state.isLoading&&this.state.hasMore&&e.target&&window.innerHeight+e.target.scrollTop>=e.target.scrollHeight-600&&this.loadOutfits()}},{key:"loadOutfits",value:function(){var e=this;this.setState({isLoading:!0},(function(){e.setState((function(e,t){var a=e.loadedOutfits;return{hasMore:(a=a.concat(t.outfits.slice(e.loadedOutfits.length,e.loadedOutfits.length+e.outfitsToLoad))).length<t.outfits.length,isLoading:!1,loadedOutfits:a}}))}))}},{key:"render",value:function(){for(var e=this,t=this.state.loadedOutfits.map((function(t){var a=!1;return e.props.teamMembers.forEach((function(e){e.Character===t.Character&&e.Outfit===t.Outfit&&(a=!0)})),s.a.createElement(ne,{key:t.Character+t.Outfit+t["Total Bonus"],info:t,inTeam:a,selAttr:e.props.selAttr,setMember:e.props.setMember})})),a=[],n=0;n<4;n++)a.push(s.a.createElement("div",{key:n,className:"outfit-placeholder"}));return s.a.createElement("div",{id:"outfitView",onScroll:this.onScrollThrottled},s.a.createElement("div",{id:"outfitList",className:this.props.view},t,"card"===this.props.view&&a),!this.state.hasMore&&"card"===this.props.view&&s.a.createElement("p",{className:"status"},"End of results"))}}]),a}(s.a.PureComponent);function ne(e){var t="outfitCard"+(e.info.hasOwnProperty("Made")?e.info.Made?"":" notMade":"");return s.a.createElement("div",{className:t,onClick:function(){return e.setMember(e.info)}},e.inTeam&&s.a.createElement("div",{className:"inTeam"},"TEAM"),s.a.createElement("p",null,e.info.Character),s.a.createElement("p",null,e.info.Outfit),s.a.createElement("hr",null),s.a.createElement("div",{className:"rowContainer"},s.a.createElement(ue,{obj:e.info,alt:"".concat(e.info.Character," ").concat(e.info.Outfit)}),s.a.createElement("div",{className:"right"},s.a.createElement(me,{attr:e.selAttr,bonus:e.info,maxValue:300}),"Total Bonus"in e.info&&s.a.createElement("div",{className:"bonus"},"TOTAL: ",s.a.createElement("strong",null,e.info["Total Bonus"])))))}var se="AIzaSyBYN0YVkl2lB5ps2CL_74JKIs5TOukXdm4",re="1JeHlN1zcBwyBbBkyfsDiiqDZpLotkn770ewa1JCsekU";function ie(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.query||{},n=t.conditions||[],s=t.isInclusive||!1,r=[];if(e){for(var i=function(t){var i=e[t],l=n.length<=0,o=Object.keys(a).length<=0;if(0===Object.keys(a).length&&0===n.length)o=!0;else if(n.length>0&&n.forEach((function(e){Object.values(i).includes(e)&&(l=!0)})),Object.keys(a).length>0){var c=le(a,i);o=s?c.reduce((function(e,t){return e||t}),!1):c.reduce((function(e,t){return e&&t}),!0)}l&&o&&r.push(JSON.parse(JSON.stringify(i)))},l=0;l<e.length;l++)i(l);return r}}function le(e,t){return Object.keys(e).map((function(a){var n=a.replace("sel",""),s=e[a],r=t[n];if(s.has(r))return!0}))}function oe(e){for(var t=[],a=e[0],n=1;n<e.length;n++){for(var s=e[n],r={},i=0;i<s.length;i++){var l=a[i],o=s[i];isNaN(o)||(o=Number(o)),r[l]=o}t.push(r)}return t}var ce=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(){var e;return Object(u.a)(this,a),(e=t.call(this)).state={allOutfits:null,userOutfits:null,outfits:null,userSheetId:null,idolStats:null,attr:["Ac","Pa","Un","Sm","Te","Ch"],selAttr:[],jobs:null,activeJob:null,filters:null,isInclusive:!1,isOutfitList:!1,teamMembers:[],teamSlot:null},e.submitFilterSelection=e.submitFilterSelection.bind(Object(h.a)(e)),e.toggleSearchTypeTrue=e.toggleSearchTypeTrue.bind(Object(h.a)(e)),e.toggleSearchTypeFalse=e.toggleSearchTypeFalse.bind(Object(h.a)(e)),e.toggleMade=e.toggleMade.bind(Object(h.a)(e)),e.sortByFilter=e.sortByFilter.bind(Object(h.a)(e)),e.sortOutfits=e.sortOutfits.bind(Object(h.a)(e)),e.toggleOutfitList=e.toggleOutfitList.bind(Object(h.a)(e)),e.selectJob=e.selectJob.bind(Object(h.a)(e)),e.setMember=e.setMember.bind(Object(h.a)(e)),e.getUserData=e.getUserData.bind(Object(h.a)(e)),e.handleErrors=e.handleErrors.bind(Object(h.a)(e)),e.getTopTeam=e.getTopTeam.bind(Object(h.a)(e)),e}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=this;fetch("https://sheets.googleapis.com/v4/spreadsheets/".concat(re,"/values/").concat("Stat Bonuses","?key=").concat(se)).then((function(e){return e.json()})).then((function(t){var a=t.values,n={},s=[];a[0].forEach((function(t){"ImageID"===t||"Total"===t||e.state.attr.includes(t)||(s.push(t),n["sel"+t]=new Set)}));var r=oe(a);r=e.filterIfColumnIsEmpty(r,["Unit","Character","Outfit"]),n.allOutfits=r,n.filters=s,e.setState(n)})).then((function(){fetch("https://sheets.googleapis.com/v4/spreadsheets/".concat(re,"/values/").concat("Jobs","?key=").concat(se)).then((function(e){return e.json()})).then((function(t){var a=oe(t.values);e.setState({jobs:a});for(var n=0;"Beginner"!==a[n].Type;)n++;e.selectJob(a[n])})).then((function(){e.props.sheetId&&e.getUserData(e.props.sheetId)}))}))}},{key:"filterIfColumnIsEmpty",value:function(e,t){return e.filter((function(e){return t.map((function(t){return!!e[t]})).reduce((function(e,t){return e&&t}),!0)}))}},{key:"toggleOutfitList",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.setState((function(t){return{isOutfitList:!t.isOutfitList,teamSlot:e}}))}},{key:"selectJob",value:function(e){var t=this;if(this.state.activeJob!==e){var a=Object(c.a)({},this.state);a.activeJob=e,a.teamMembers=new Array(e["Idol Slots"]).fill(0);var n=this.state.userOutfits?this.state.userOutfits:this.state.allOutfits;a.selAttr=Object.keys(e).filter((function(a){return t.state.attr.includes(a)&&e[a]>0})),n&&(a.outfits=this.prepareOutfitData(n,a),a.teamMembers=this.getTopTeam(n,e)),this.setState(a)}}},{key:"toggleSearchTypeTrue",value:function(){this.setState({isInclusive:!0})}},{key:"toggleSearchTypeFalse",value:function(){this.setState({isInclusive:!1})}},{key:"toggleMade",value:function(){var e=null;e=0===this.state.selMade.size?new Set([!0]):new Set,this.submitFilterSelection("selMade")(e)}},{key:"sortOutfits",value:function(e,t){var a=this;this.setState((function(n,s){var r=Object(o.a)(n.outfits);return a.sortByFilter(r,e,t),{outfits:r}}))}},{key:"sortByFilter",value:function(e,t){var a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];e.sort((function(e,n){return a?e[t]-n[t]:n[t]-e[t]}))}},{key:"submitFilterSelection",value:function(e){var t=this;return function(a){t.setState((function(n){var s=Object(c.a)({},n);s[e]=a;var r=s.userOutfits?s.userOutfits:s.allOutfits,i=t.prepareOutfitData(r,s);return s.outfits=i,s}))}}},{key:"setMember",value:function(e){var t=this;this.setState((function(a){var n=a.teamMembers.slice();return t.setMemberAtSlot(n,e,a.teamSlot),{teamMembers:n,isOutfitList:!1}}))}},{key:"setMemberAtSlot",value:function(e,t,a){for(var n=0;n<e.length;n++)if(t.Character===e[n].Character){var s=n,r=e[a];e[s]=r;break}e[a]=t}},{key:"getTopTeam",value:function(e,t){var a=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,s=new Array(t["Idol Slots"]).fill(0),r=Object.keys(t).filter((function(e){return a.state.attr.includes(e)&&t[e]>0})),i=this.getJobConditions(t),l=i.length>0?ie(e,{conditions:this.getJobConditions(t)}):e;l=this.addIdolStatus(l,n),l=this.calculateTotalBonus(l,r),this.sortByFilter(l,"Total Bonus",!1);for(var o=0;s.includes(0)&&o<l.length;){var c=s.map((function(e){return!!e&&e.Character===l[o].Character}));if(!c.includes(!0)){var u=s.indexOf(0);this.setMemberAtSlot(s,l[o],u)}o++}return s}},{key:"prepareOutfitData",value:function(e,t){var a=this.getQueryAndConditions(t);a.isInclusive=t.isInclusive;var n=ie(e,a);return n=this.addIdolStatus(n,t.idolStats),t.selAttr.length>0&&(n=this.calculateTotalBonus(n,t.selAttr),this.sortByFilter(n,"Total Bonus",!1)),n}},{key:"getQueryAndConditions",value:function(e){return{query:Object.keys(e).reduce((function(t,a){var n=e[a];return a.includes("sel")&&"selAttr"!==a&&n.size>0&&(t[a]=n),t}),{}),conditions:e.activeJob?this.getJobConditions(e.activeJob):[]}}},{key:"getJobConditions",value:function(e){return e.Conditions?e.Conditions.split(",").map((function(e){return e.trim()})):[]}},{key:"calculateTotalBonus",value:function(e,t){return e.forEach((function(e){var a=0;t.forEach((function(t){return a+=e[t]})),e["Total Bonus"]=a})),e}},{key:"addIdolStatus",value:function(e,t){return t&&e.forEach((function(e){var a=t[e.Character];a&&!e.AddedStat&&(Object.keys(a).forEach((function(t){e.hasOwnProperty(t)&&(e[t]+=a[t])})),e.AddedStat=!0)})),e}},{key:"checkResponseOk",value:function(e){if(e.ok||200===e.status)return e.json();throw e}},{key:"getUserData",value:function(e){var t=this;if(e.length>0){var a=e.replace("https://docs.google.com/spreadsheets/d/",""),n=a.indexOf("/")>0?a.slice(0,a.indexOf("/")):a,s=fetch("https://sheets.googleapis.com/v4/spreadsheets/".concat(n,"/values/","Outfits","?key=").concat(se)).then((function(e){return t.checkResponseOk(e)})).catch((function(e){return t.handleErrors(e)})),r=fetch("https://sheets.googleapis.com/v4/spreadsheets/".concat(n,"/values/","Idol Status","?key=").concat(se)).then((function(e){return t.checkResponseOk(e)})).catch((function(e){return t.handleErrors(e)}));Promise.all([s,r]).then((function(e){var a=Object(l.a)(e,2),s=a[0],r=a[1];if(console.log(s,r),s){var i=s.values,u=i[0].map((function(e){return e.toUpperCase()}));if(u.includes("CHARACTER")&&u.includes("OUTFIT")&&u.includes("MADE")){i[0]=u;var m=oe(i);(m=m.filter((function(e){return e.CHARACTER&&e.OUTFIT}))).sort((function(e,t){return e.CHARACTER.toUpperCase()===t.CHARACTER.toUpperCase()?e.OUTFIT.toUpperCase()<t.OUTFIT.toUpperCase()?-1:e.OUTFIT.toUpperCase()>t.OUTFIT.toUpperCase()?1:0:e.CHARACTER.toUpperCase()<t.CHARACTER.toUpperCase()?-1:e.CHARACTER.toUpperCase()>t.CHARACTER.toUpperCase()?1:0}));var h=Object(o.a)(t.state.allOutfits).reduce((function(e,t){for(var a=!1,n=0,s=m.length-1;!a&&!(s<n);){var r=Math.floor(n+(s-n)/2);m[r].CHARACTER.toUpperCase()===t.Character.toUpperCase()?m[r].OUTFIT.toUpperCase()<t.Outfit.toUpperCase()?n=r+1:m[r].OUTFIT.toUpperCase()>t.Outfit.toUpperCase()?s=r-1:a=m[r]:m[r].CHARACTER.toUpperCase()<t.Character.toUpperCase()?n=r+1:m[r].CHARACTER.toUpperCase()>t.Character.toUpperCase()&&(s=r-1)}return a?(Object.keys(a).includes("MADE")&&(t.Made="TRUE"===a.MADE),e.push(t),e):e}),[]),d=null;if(r.values){var p=oe(r.values);d={},p.forEach((function(e){var t=e.Character;delete e.Character,d[t]=e}))}var f=Object(c.a)({},t.state);f.idolStats=d,f.userOutfits=h,f.teamMembers=t.getTopTeam(h,f.activeJob,d),f.outfits=t.prepareOutfitData(h,f),f.userSheetId=n,f.selMade=new Set,t.setState(f)}else t.handleErrors({error:{status:"HEADER NOT FOUND"}})}}))}}},{key:"handleErrors",value:function(e){e.json().then((function(e){if(e.error){var t="";if(403===e.error.code&&e.error.status.includes("PERMISSION_DENIED")&&(t+="Sorter did not have permission to access your spreadsheet. Don't forget to turn link-sharing on!"),400===e.error.code&&e.error.status.includes("INVALID_ARGUMENT")&&(e.error.message.includes("Outfits")&&(t+="Sorter did not find a sheet called 'Outfits' in your spreadsheet."),e.error.message.includes("Idol Stats")&&(t+="Sorter did not find a sheet called 'Idol Stats' in your spreadsheet.")),"HEADER NOT FOUND"===e.error.status)return console.log("Error: Sorter did not find 'Character', 'Outfit', and 'Made' columns in your spreadsheet."),null;throw t+=e.error.message,new Error(t)}})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){if(this.state.outfits&&this.state.jobs){var e=this.state.outfits.slice(0,100);e=JSON.stringify(e);var t={activeJob:this.state.activeJob,teamMembers:this.state.teamMembers,jobs:this.state.jobs,attr:this.state.attr,selAttr:this.state.selAttr,selectJob:this.selectJob},a={sheetId:this.state.userSheetId,selAttr:this.state.selAttr,activeJob:this.state.activeJob,teamMembers:this.state.teamMembers,toggleOutfitList:this.toggleOutfitList,getUserData:this.getUserData},n={key:e,outfits:this.state.outfits,teamMembers:this.state.teamMembers,view:this.state.view,attr:this.state.attr,selAttr:this.state.selAttr,setMember:this.setMember,toggleOutfitList:this.toggleOutfitList},r={selAttr:this.state.selAttr,selMade:this.state.selMade,data:this.state.allOutfits,filters:this.state.filters,status:"showing ".concat(this.state.outfits.length," outfits"),submitFilterSelection:this.submitFilterSelection,toggleTrue:this.toggleSearchTypeTrue,toggleFalse:this.toggleSearchTypeFalse,toggleMade:this.state.hasOwnProperty("selMade")&&this.toggleMade,toggleOutfitList:this.toggleOutfitList,sortOutfits:this.sortOutfits};return s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{id:"teamBuilder"},s.a.createElement(q,a),this.state.activeJob&&s.a.createElement(Y,t)),s.a.createElement("div",{className:"overlay",style:{display:this.state.isOutfitList?"flex":"none"}},s.a.createElement("div",{className:"overlayContent"},s.a.createElement(I,r),s.a.createElement(ae,n))))}return s.a.createElement("div",{id:"loading"},"Loading...")}}]),a}(s.a.Component);function ue(e){return e.obj.ImageID&&"MISSING"!==e.obj.ImageID?s.a.createElement("img",{src:"https://drive.google.com/thumbnail?id="+e.obj.ImageID,alt:e.alt}):s.a.createElement("div",{className:"imgPlaceholder"},s.a.createElement("div",null,e.alt))}function me(e){var t=e.hideIcon||!1;return s.a.createElement("div",{className:"attrList"},e.attr.map((function(a){var n=(e.value?e.value[a]:0)+(e.bonus?e.bonus[a]:0),r=n;e.bonus&&(e.bonus.AddedStat||(r="+"+r));var i={attr:a,value:n,maxValue:e.maxValue};return e.baseline&&(i.baseline=e.baseline[a]),s.a.createElement("div",{className:"attr",key:a},!t&&s.a.createElement(de,{attr:a}),s.a.createElement("span",{className:"numberText"},r),s.a.createElement(he,i),e.baseline&&s.a.createElement("span",{className:"numberText"},"".concat(e.value[a]>e.baseline[a]?"+":"").concat(e.value[a]-e.baseline[a])))})))}function he(e){return s.a.createElement("span",{className:"statusBarContainer"},e.baseline&&s.a.createElement("span",{className:"baseline",style:{marginLeft:"".concat(e.baseline/e.maxValue*100,"%")}}),s.a.createElement("span",{className:"statusBar "+e.attr.toLowerCase(),style:{width:"".concat(e.value/e.maxValue*100,"%")}}))}function de(e){return s.a.createElement("span",{className:"icon "+e.attr.toLowerCase()},e.attr)}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var pe=a(10),fe=a(38);function ge(){var e=Object(pe.f)().sheetId;return s.a.createElement(ce,{sheetId:e})}i.a.render(s.a.createElement(s.a.StrictMode,null,s.a.createElement(fe.a,{basename:"/"},s.a.createElement(pe.c,null,s.a.createElement(pe.a,{path:"/:sheetId",children:s.a.createElement(ge,null)}),s.a.createElement(pe.a,{path:"/"},s.a.createElement(ce,null))))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[39,1,2]]]);
//# sourceMappingURL=main.de9fbcc4.chunk.js.map